var AVAILABLE_SPECIES=[{name:"Homo sapiens",species:"hsa",icon:""},{name:"Mus musculus",species:"mmu",icon:""},{name:"Danio rerio",species:"dre",icon:""}],AVAILABLE_TRACKS=[{species:"hsa",enabled_tracks:[{id:"Gene/Transcript",checked:!0},{id:"Cytoband",checked:!0},{id:"Sequence",checked:!0}]},{species:"mmu",enabled_tracks:[{id:"Gene/Transcript",checked:!1},{id:"Cytoband",checked:!1}]},{species:"dre",enabled_tracks:[{id:"Gene/Transcript",checked:!1},{id:"Cytoband",checked:!0}]}],DAS_TRACKS=[{species:"hsa",
categories:[{name:"Core",sources:[{name:"GRC Region NCBI_37",url:"http://das.sanger.ac.uk/das/grc_region_GRCh37/features",checked:!0},{name:"Vega genes",url:"http://das.sanger.ac.uk/das/vega_ens_zv8_genes/features",checked:!1}]},{name:"Variation",sources:[{name:"Cosmic Mutations NCBI 36",url:"http://das.sanger.ac.uk/das/cosmic_mutations_GRCh37/features",checked:!1}]},{name:"Regulatory",sources:[]}]},{species:"mmu",categories:[{name:"Core",sources:[{name:"GRC Region NCBI_37",url:"http://das.sanger.ac.uk/das/grc_region_GRCh37/features",
checked:!1},{name:"Vega genes",url:"http://das.sanger.ac.uk/das/vega_ens_zv8_genes/features",checked:!0}]},{name:"Variation",sources:[{name:"Cosmic Mutations NCBI 36",url:"http://das.sanger.ac.uk/das/cosmic_mutations_GRCh37/features",checked:!1}]},{name:"Regulatory",sources:[]}]},{species:"dre",categories:[{name:"Core",sources:[{name:"GRC Region NCBI_37",url:"http://das.sanger.ac.uk/das/grc_region_GRCh37/features",checked:!1},{name:"Vega genes",url:"http://das.sanger.ac.uk/das/vega_ens_zv8_genes/features",
checked:!1}]},{name:"Variation",sources:[{name:"Cosmic Mutations NCBI 36",url:"http://das.sanger.ac.uk/das/cosmic_mutations_GRCh37/features",checked:!0}]},{name:"Regulatory",sources:[]}]}],GENOME_MAPS_REGISTERED_PLUGINS={},GENOME_MAPS_AVAILABLE_PLUGINS=[{category:"Test",plugins:[{name:"MyPlugin",email:"yo@cipf.es",version:"1.0",description:"",icon:"",permissions:"",available_species:[{"name:":"hsa",assembly:"hg19"}]}]},{category:"",plugins:[{name:"Expression",email:"imedina@cipf.es",version:"1.0",
description:"",icon:"",permissions:"",available_species:[{"name:":"hsa",assembly:"hg19"}]},{name:"Genotype",email:"imedina@cipf.es",version:"1.0",description:"",icon:"",permissions:"",available_species:[{"name:":"hsa",assembly:"hg19"}]}]}],myPlugin=new GenericPlugin("MyPlugin",{title:"My first plugin",width:900,launch:function(){aux()}});
function aux(){var a=Ext.create("Ext.panel.Panel",{title:"Test panel",width:300,height:300});Ext.create("Ext.panel.Panel",{title:"Test panel",width:300,height:100});myPlugin.addSenchaElement(a)}var genotypePlugin=new GenericPlugin("Genotype",{title:"Genotype",width:900,launch:function(a){auxGenotype(a)}});
function auxGenotype(a){genotypePlugin.closeWindow();var b=new GenotypeGenomicAttributesWidget(a.genomeViewer.species);a.wum&&(genomeMaps.headerWidget.onLogin.addEventListener(function(){b.attributesPanel.sessionInitiated()}),genomeMaps.headerWidget.onLogout.addEventListener(function(){b.attributesPanel.sessionFinished()}));b.draw();b.onMarkerClicked.addEventListener(function(a,b){genomeMaps.goTo(b.chromosome,b.start)});b.onTrackAddAction.addEventListener(function(a,b){genomeMaps.addTrackFromFeaturesList(b)})}
var expressionPlugin=new GenericPlugin("Expression",{title:"Expression",width:1035,height:653,launch:function(){auxExpression()}});
function auxExpression(){var a=new ExpressionGenomicAttributesWidget(genomeMaps.genomeViewer.species);genomeMaps.wum&&(genomeMaps.headerWidget.onLogin.addEventListener(function(){a.attributesPanel.sessionInitiated()}),genomeMaps.headerWidget.onLogout.addEventListener(function(){a.attributesPanel.sessionFinished()}));a.draw();a.onMarkerClicked.addEventListener(function(a,c){genomeMaps.goTo(c.chromosome,c.start)});a.onTrackAddAction.addEventListener(function(a,c){console.log(c);genomeMaps.addTrackFromFeaturesList(c)})}
function GenericPlugin(a,b){this.id=a+"_"+Math.round(1E4*Math.random());this.name=a;this.title=null;this.width=640;this.height=480;this.launch=null;this.container_div=this.name+"_plugin_container";null!=b&&(null!=b.targetId&&(this.targetId=b.targetId),null!=b.title&&(this.title=b.title),null!=b.width&&(this.width=b.width),null!=b.height&&(this.height=b.height),null!=b.launch&&(this.launch=b.launch));GENOME_MAPS_REGISTERED_PLUGINS[this.name]=this}
GenericPlugin.prototype.draw=function(){var a=this;this.win=Ext.create("Ext.window.Window",{id:this.id+"pluginWindow",title:this.title,resizable:!1,minimizable:!0,constrain:!0,closable:!0,width:this.width,height:this.height,html:"<div id="+this.container_div+"></div>",buttonAlign:"left",buttons:["->",{text:"Close",handler:function(){a.closeWindow()}}],listeners:{scope:this,minimize:function(){this.win.hide()},destroy:function(){delete this.win}}});this.win.show()};
GenericPlugin.prototype.addHtmlElement=function(){$("#"+this.container_div).html("html de prueba")};GenericPlugin.prototype.addSenchaElement=function(a){this.getWindow().add(a)};GenericPlugin.prototype.getWindow=function(){return Ext.getCmp(this.id+"pluginWindow")};GenericPlugin.prototype.closeWindow=function(){Ext.getCmp(this.id+"pluginWindow").close()};
function GenomeMaps(a,b){var c=this;this.id="GenomeMaps#"+Math.round(1E4*Math.random())+"#";this.suiteId=9;this.title="Genome Maps";this.description="RC";this.wum=!0;this.args=b;this.width=$(window).width();this.height=$(window).height();this.targetId=document.body;null!=a&&(this.targetId=a);null!=b&&(null!=b.width&&(this.width=b.width),null!=b.height&&(this.height=b.height),null!=b.wum&&(this.wum=b.wum));this.genomeViewer=new GenomeViewer(null,AVAILABLE_SPECIES[0],{menuBar:this.getMenuBar()});this.headerWidget=
new HeaderWidget({appname:this.title,description:this.description,suiteId:this.suiteId});this.headerWidget.onLogin.addEventListener(function(){Ext.example.msg("Welcome","You logged in")});this.headerWidget.onLogout.addEventListener(function(){Ext.example.msg("Good bye","You logged out")});this.genomeViewer.onSpeciesChange.addEventListener(function(){c.draw()});$(window).smartresize(function(){c.setSize($(window).width(),$(window).height())})}
GenomeMaps.prototype.draw=function(){null==this._panel&&(this._panel=Ext.create("Ext.panel.Panel",{renderTo:this.targetId,border:!1,width:this.width,height:this.height,items:[this.headerWidget.getPanel(),this.genomeViewer._getPanel(this.width,this.height-this.headerWidget.height)]}));this.headerWidget.setDescription(this.genomeViewer.speciesName);this.genomeViewer.setSpecieMenu(AVAILABLE_SPECIES);this._setTracks();this.setTracksMenu();this.setDASMenu();this.setPluginsMenu();this.genomeViewer.draw()};
GenomeMaps.prototype.setSize=function(a,b){500>a&&(a=500);2400<a&&(a=2400);this.width=a;this.height=b;this._panel.setSize(a,b);this.genomeViewer.setSize(a,b-this.headerWidget.height);this.headerWidget.setWidth(a)};
GenomeMaps.prototype._setTracks=function(){for(var a=this.genomeViewer.species,b=AVAILABLE_TRACKS,c=0;c<b.length;c++)if(b[c].species==a){for(var d,e,f=0;f<b[c].enabled_tracks.length;f++)d=b[c].enabled_tracks[f].id,(e=b[c].enabled_tracks[f].checked)&&(this.genomeViewer.genomeWidgetProperties.tracks[d]=e);break}b=DAS_TRACKS;for(c=0;c<b.length;c++)if(b[c].species==a){for(f=0;f<b[c].categories.length;f++)for(var g=0;g<b[c].categories[f].sources.length;g++)if(a=b[c].categories[f].sources[g].name,d=b[c].categories[f].sources[g].url,
e=b[c].categories[f].sources[g].checked)this.genomeViewer.loadDASTrack(a,d),this.genomeViewer.genomeWidgetProperties.tracks[a]=e;break}};
GenomeMaps.prototype.getMenuBar=function(){var a=this,b=Ext.create("Ext.menu.Menu",{items:[{text:"New",handler:function(){console.log("Not yet implemented, press F5")}},"-",{text:"Import",menu:[{text:"GFF",handler:function(){var b=new GFFFileWidget;b.draw();b.onOk.addEventListener(function(b,c){a.genomeViewer.addFeatureTrack(c.title,c.dataAdapter)})}},{text:"BED",disabled:!0,handler:function(b,c){a.genomeViewer.addFeatureTrack(c.title,c.dataAdapter)}},{text:"VCF",handler:function(){var b=new VCFFileWidget;
b.draw();b.onOk.addEventListener(function(b,c){a.genomeViewer.addFeatureTrack(c.title,c.dataAdapter)})}}]},{text:"Download as",iconCls:"icon-box",menu:[{text:"PNG",iconCls:"icon-blue-box",disabled:!1,listeners:{scope:this,click:function(){var a=(new XMLSerializer).serializeToString(this.genomeViewer.genomeWidget.trackCanvas._svg),b=DOM.createNewElement("canvas",document.body,[["id","ext-gen1097"]]);canvg(b,a);Canvas2Image.saveAsPNG(b)}}},{text:"JPEG",iconCls:"icon-blue-box",disabled:!1,listeners:{scope:this,
click:function(){try{a.genomeViewer._getPanel().setLoading("Saving image");var b=(new XMLSerializer).serializeToString(this.genomeViewer.genomeWidget.trackCanvas._svg),c=DOM.createNewElement("canvas",document.body,[["id","ext-gen1097"]]);canvg(c,b);Canvas2Image.saveAsJPEG(c)}catch(d){alert(d)}finally{a.genomeViewer._getPanel().setLoading(!1)}}}}]}]}),c=Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",floating:!0,items:[{text:"Zoom",menu:this.getZoomMenu()},"-",{text:"Label",menu:this.getLabelMenu()},
"-",{text:"Karyotype",handler:function(){a.genomeViewer._showKaryotypeWindow()}},{text:"Gene legend",handler:function(){var a=new GeneFeatureFormatter;(new LegendWidget({title:"Gene legend"})).draw(a.getBioTypeColors())}},"-",{text:"Ensembl Id",checked:!1,handler:function(){a.position=Math.ceil(a.genomeViewer.genomeWidget.trackCanvas.getMiddlePoint())+1;a.genomeViewer.refreshMasterGenomeViewer();this.checked?a.genomeViewer.genomeWidgetProperties.setLabelHeight(9):a.genomeViewer.genomeWidgetProperties.setLabelHeight(10)}}]}),
d=Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",floating:!0,items:[{text:"Feature",menu:this.getFeatureSearchMenu()},{text:"Functional",menu:this.getFunctionalSearchMenu()},{text:"Regulatory",menu:this.getRegulatorySearchMenu()}]});return Ext.create("Ext.toolbar.Toolbar",{cls:"bio-menubar",height:27,padding:"0 0 0 10",items:[{text:"File",menu:b},{text:"View",menu:c},{text:"Search",menu:d},{text:"Tracks",menu:this.getTracksMenu()},{text:"Plugins",menu:this.getPluginsMenu()}]})};
GenomeMaps.prototype.getZoomMenu=function(){for(var a=this,b=Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",floating:!0,items:[]}),c=0;100>=c;c+=10)b.add({text:c+"%",group:"zoom",checked:!1,handler:function(){a.genomeViewer.setZoom(this.text.replace("%",""))}});return b};
GenomeMaps.prototype.getLabelMenu=function(){var a=this;return Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",floating:!0,items:[{text:"None",handler:function(){a.genomeViewer.genomeWidgetProperties.setLabelHeight(0);a.genomeViewer.refreshMasterGenomeViewer()}},{text:"Small",handler:function(){a.genomeViewer.genomeWidgetProperties.setLabelHeight(8);a.genomeViewer.refreshMasterGenomeViewer()}},{text:"Medium",handler:function(){a.genomeViewer.genomeWidgetProperties.setLabelHeight(10);a.genomeViewer.refreshMasterGenomeViewer()}},
{text:"Large",handler:function(){a.genomeViewer.genomeWidgetProperties.setLabelHeight(12);a.genomeViewer.refreshMasterGenomeViewer()}},{text:"x-Large",handler:function(){a.genomeViewer.genomeWidgetProperties.setLabelHeight(14);a.genomeViewer.refreshMasterGenomeViewer()}}]})};
GenomeMaps.prototype.getFeatureSearchMenu=function(){var a=this;return Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",floating:!0,items:[{text:"Genes",handler:function(){var b=new InputListWidget({title:"Gene List",genomeViewer:a.genomeViewer});b.onOk.addEventListener(function(b,d){a.genomeViewer.openGeneListWidget(d)});b.draw()}},{text:"Transcript",handler:function(){var b=new InputListWidget({title:"Ensembl Transcript",genomeViewer:a.genomeViewer});b.onOk.addEventListener(function(b,d){a.genomeViewer.openTranscriptListWidget(d)});
b.draw()}},{text:"Exon",handler:function(){var b=new InputListWidget({title:"Ensembl Exon List",genomeViewer:a.genomeViewer});b.onOk.addEventListener(function(b,d){a.genomeViewer.openExonListWidget(d)});b.draw()}},{text:"SNP",handler:function(){var b=new InputListWidget({title:"SNP List",genomeViewer:a.genomeViewer});b.onOk.addEventListener(function(b,d){a.genomeViewer.openSNPListWidget(d)});b.draw()}},{text:"Protein",handler:function(){var b=new InputListWidget({title:"Ensembl Protein",genomeViewer:a.genomeViewer});
b.onOk.addEventListener(function(b,d){a.genomeViewer.openGOListWidget(d)});b.draw()}}]})};
GenomeMaps.prototype.getFunctionalSearchMenu=function(){var a=this;return Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",floating:!0,items:[{text:"GO",handler:function(){var b=new InputListWidget({title:"Gene Ontology",genomeViewer:a.genomeViewer});b.onOk.addEventListener(function(b,d){a.genomeViewer.openGOListWidget(d)});b.draw()}},{text:"Reactome",disabled:!0,handler:function(){alert("Not yet implemented")}},{text:"Interpro",handler:function(){var b=new InputListWidget({title:"Protein",genomeViewer:a.genomeViewer});
b.onOk.addEventListener(function(b,d){a.genomeViewer.openGOListWidget(d)});b.draw()}}]})};GenomeMaps.prototype.getRegulatorySearchMenu=function(){return Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",floating:!0,items:[{text:"miRNA Target",disabled:!0,handler:function(){alert("Not yet implemented")}},{text:"TFBS",disabled:!0,handler:function(){alert("Not yet implemented")}}]})};
GenomeMaps.prototype.getTracksMenu=function(){var a=this;return this.tracksMenu=Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",floating:!0,items:[{text:"Core",menu:[{text:"Gene/Transcript",id:"Gene/Transcript",checked:!1,disabled:!0,handler:function(){a.genomeViewer.genomeWidgetProperties.tracks[this.text]=this.checked;a.genomeViewer.refreshMasterGenomeViewer()}},{text:"Cytoband",id:"Cytoband",checked:!1,disabled:!0,handler:function(){a.genomeViewer.genomeWidgetProperties.tracks[this.text]=this.checked;
a.genomeViewer.refreshMasterGenomeViewer()}},{text:"Sequence",id:"Sequence",checked:!1,disabled:!0,handler:function(){a.genomeViewer.genomeWidgetProperties.tracks[this.text]=this.checked;a.genomeViewer.refreshMasterGenomeViewer()}},{text:"CpG islands",id:"CpG islands",checked:!1,disabled:!0,handler:function(){a.genomeViewer.genomeWidgetProperties.tracks[this.text]=this.checked;a.genomeViewer.refreshMasterGenomeViewer()}}]},{text:"Variation",menu:[{text:"SNP",id:"SNP",checked:!1,disabled:!0,handler:function(){a.genomeViewer.genomeWidgetProperties.tracks[this.text]=
this.checked;a.genomeViewer.refreshMasterGenomeViewer()}},{text:"Mutation",id:"Mutation",checked:!1,disabled:!0,handler:function(){a.genomeViewer.genomeWidgetProperties.tracks[this.text]=this.checked;a.genomeViewer.refreshMasterGenomeViewer()}},{text:"Structural variation",id:"Structural variation",checked:!1,disabled:!0,handler:function(){a.genomeViewer.genomeWidgetProperties.tracks[this.text]=this.checked;a.genomeViewer.refreshMasterGenomeViewer()}}]},{text:"Regulatory",menu:[{text:"miRNA targets",
id:"miRNA targets",checked:!1,disabled:!0,handler:function(){a.genomeViewer.genomeWidgetProperties.tracks[this.text]=this.checked;a.genomeViewer.refreshMasterGenomeViewer()}},{text:"TFBS",id:"TFBS",checked:!1,disabled:!0,handler:function(){}},{text:"Histone",id:"Histone",checked:!1,disabled:!0,handler:function(){a.genomeViewer.genomeWidgetProperties.tracks[this.text]=this.checked;a.genomeViewer.refreshMasterGenomeViewer()}},{text:"Polymerase",id:"Polymerase",checked:!1,disabled:!0,handler:function(){a.genomeViewer.genomeWidgetProperties.tracks[this.text]=
this.checked;a.genomeViewer.refreshMasterGenomeViewer()}},{text:"Open Chromatin",id:"Open Chromatin",checked:!1,disabled:!0,handler:function(){a.genomeViewer.genomeWidgetProperties.tracks[this.text]=this.checked;a.genomeViewer.refreshMasterGenomeViewer()}},{text:"Conserved regions",id:"Conserved regions",checked:!1,disabled:!0,handler:function(){a.genomeViewer.genomeWidgetProperties.tracks[this.text]=this.checked;a.genomeViewer.refreshMasterGenomeViewer()}}]},"-",{text:"DAS",menu:this.getDASMenu()},
"-",{text:"Add custom data",menu:[{text:"GFF",handler:function(){var b=new GFFFileWidget;b.draw();a.wum&&(a.headerWidget.onLogin.addEventListener(function(){b.sessionInitiated()}),a.headerWidget.onLogout.addEventListener(function(){b.sessionFinished()}));b.onOk.addEventListener(function(b,d){a.genomeViewer.addFeatureTrack(d.title,d.dataAdapter)})}},{text:"BED",handler:function(){var b=new BEDFileWidget;b.draw();b.onOk.addEventListener(function(b,d){a.genomeViewer.addFeatureTrack(d.title,d.dataAdapter)})}},
{text:"VCF",handler:function(){var b=new VCFFileWidget;b.draw();b.onOk.addEventListener(function(b,d){a.genomeViewer.addFeatureTrack(d.title,d.dataAdapter)})}}]}]})};GenomeMaps.prototype.setTracksMenu=function(){for(var a=AVAILABLE_TRACKS,b=this.genomeViewer.species,c=0;c<a.length;c++)if(a[c].species==b){for(b=0;b<a[c].enabled_tracks.length;b++)enabled=a[c].enabled_tracks[b],Ext.getCmp(enabled.id).enable().setChecked(enabled.checked);break}};
GenomeMaps.prototype.getDASMenu=function(){null==this._DASMenu&&(this._DASMenu=Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",floating:!0,items:[]}));return this._DASMenu};
GenomeMaps.prototype.setDASMenu=function(){var a=this,b=DAS_TRACKS,c=this.genomeViewer.species,d=this.getDASMenu();d.removeAll();for(var e=0;e<b.length;e++)if(b[e].species==c){for(c=0;c<b[e].categories.length;c++){for(var f=[],g=0;g<b[e].categories[c].sources.length;g++)f.push({text:b[e].categories[c].sources[g].name,sourceName:b[e].categories[c].sources[g].name,sourceUrl:b[e].categories[c].sources[g].url,checked:b[e].categories[c].sources[g].checked,handler:function(){a.genomeViewer.loadDASTrack(this.sourceName,
this.sourceUrl);a.genomeViewer.genomeWidgetProperties.tracks[this.text]=this.checked;a.genomeViewer.refreshMasterGenomeViewer()}});d.add({text:b[e].categories[c].name,menu:f})}break}d.add("-",{text:"Add custom...",handler:function(){var b=new UrlWidget({title:"Add a DAS track"});b.onAdd.addEventListener(function(b,c){a.genomeViewer.loadDASTrack(c.name,c.url);a.setCustomDASMenu(c.name);a.genomeViewer.refreshMasterGenomeViewer()});b.draw()},menu:this.getCustomDASMenu()})};
GenomeMaps.prototype.getCustomDASMenu=function(){null==this._customDASMenu&&(this._customDASMenu=Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",floating:!0,items:[]}));return this._customDASMenu};GenomeMaps.prototype.setCustomDASMenu=function(a){var b=this;b.getCustomDASMenu().add({text:a,checked:!0,handler:function(){b.genomeViewer.genomeWidgetProperties.tracks[a]=this.checked;b.genomeViewer.refreshMasterGenomeViewer()}})};
GenomeMaps.prototype.getPluginsMenu=function(){null==this._pluginsMenu&&(this._pluginsMenu=Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",floating:!0,items:[]}));return this._pluginsMenu};
GenomeMaps.prototype.setPluginsMenu=function(){var a=GENOME_MAPS_AVAILABLE_PLUGINS,b=this.getPluginsMenu();b.removeAll();for(var c=0;c<a.length;c++)if(""==a[c].category)for(var d=0;d<a[c].plugins.length;d++)b.add({text:a[c].plugins[d].name,pluginName:a[c].plugins[d].name,handler:function(){GENOME_MAPS_REGISTERED_PLUGINS[this.pluginName].draw();GENOME_MAPS_REGISTERED_PLUGINS[this.pluginName].launch()}});else{for(var e=[],d=0;d<a[c].plugins.length;d++)e.push({text:a[c].plugins[d].name,pluginName:a[c].plugins[d].name,
handler:function(){GENOME_MAPS_REGISTERED_PLUGINS[this.pluginName].draw();GENOME_MAPS_REGISTERED_PLUGINS[this.pluginName].launch()}});b.add({text:a[c].category,menu:e})}};
GenomeMaps.prototype.getPluginsMenuOLD=function(){var a=this;return null==this.pluginsMenu?Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",floating:!0,items:[{text:"Expression",handler:function(){var b=new ExpressionGenomicAttributesWidget(a.genomeViewer.species);a.wum&&(a.headerWidget.onLogin.addEventListener(function(){b.attributesPanel.sessionInitiated()}),a.headerWidget.onLogout.addEventListener(function(){b.attributesPanel.sessionFinished()}));b.draw();b.onMarkerClicked.addEventListener(function(b,
d){a.goTo(d.chromosome,d.start)});b.onTrackAddAction.addEventListener(function(b,d){console.log(d);a.addTrackFromFeaturesList(d)})}},{text:"Genotype",handler:function(){var b=new GenotypeGenomicAttributesWidget(a.genomeViewer.species);a.wum&&(a.headerWidget.onLogin.addEventListener(function(){b.attributesPanel.sessionInitiated()}),a.headerWidget.onLogout.addEventListener(function(){b.attributesPanel.sessionFinished()}));b.draw();b.onMarkerClicked.addEventListener(function(b,d){a.goTo(d.chromosome,
d.start)});b.onTrackAddAction.addEventListener(function(b,d){a.addTrackFromFeaturesList(d)})}}]}):Ext.create("Ext.menu.Menu",{margin:"0 0 10 0",floating:!0,items:this.pluginsMenu})};
