<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Genome Maps</title>

	<!-- CSS -->
	<link rel="stylesheet" type="text/css" href="http://jsapi.bioinfo.cipf.es/ext-libs/sencha/extjs-4.1.1/resources/css/ext-all.css">
 	<link rel="stylesheet" type="text/css" href="http://jsapi.bioinfo.cipf.es/libs/resources/css/style.css">  
	<!--	<link rel="stylesheet" type="text/css" href="../../wum/resources/css/style.css"> -->
	<link rel="stylesheet" type="text/css" href="http://jsapi.bioinfo.cipf.es/ext-libs/ChemDoodleWeb/install/ChemDoodleWeb.css">
	<link rel="stylesheet" type="text/css" href="http://jsapi.bioinfo.cipf.es/ext-libs/jquery-plugins/jquery.qtip.min.css">
  
	<!-- Google Analytics -->

	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-16414504-2']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>

  
	<!-- EXT-LIBS -->

	<!-- Ext-js -->
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/sencha/extjs-4.1.1/ext-all.js"></script>
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/sencha/extjs-4.1.1/examples/shared/examples.js"></script>
	

	<!-- jQuery -->
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/jquery/jquery-1.7.2.min.js"></script>
	
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/jquery-plugins/jquery.qtip.min.js"></script>
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/jquery-plugins/jquery.sha1.js"></script>
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/jquery-plugins/jquery.url.js"></script>
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/jquery-plugins/jquery.cookie.js"></script>  
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/jquery-plugins/jqXMLUtils.js"></script>
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/jquery-plugins/jquery.smartresize.js"></script>
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/jquery-mousewheel-3.0.6/jquery.mousewheel.min.js"></script>
	
	
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/xml2json.js"  ></script>
	
	<!-- Canvas to SVG converters -->
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/svg/base64.js"  ></script>
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/svg/canvas2image.js"  ></script>
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/svg/canvg.js"></script> 
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/svg/rgbcolor.js"></script> 
	
<!-- 	<script type="text/javascript" src="https://raw.github.com/eligrey/BlobBuilder.js/master/BlobBuilder.min.js"/></script> -->
<!-- 	<script type="text/javascript" src="https://raw.github.com/eligrey/canvas-toBlob.js/master/canvas-toBlob.min.js"/></script> -->
<!-- 	<script type="text/javascript" src="https://raw.github.com/eligrey/FileSaver.js/master/FileSaver.min.js"/></script> -->
	
	
	
	<!-- CHEMDOODLE -->
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/ChemDoodleWeb/install/ChemDoodleWeb-libs.js"></script> 
	<script type="text/javascript" src="http://jsapi.bioinfo.cipf.es/ext-libs/ChemDoodleWeb/install/ChemDoodleWeb.js"></script> 
	
	
	
	<script type="text/javascript" src="https://raw.github.com/CapMousse/include.js/master/include-min.js"></script> 
	
	<!-- LIBS -->
		<!-- js-commons-lib utils -->
		

	<script>
	include([
	         "/bioinfo-js/js-commons-lib/js-commons-lib.inc.js",
	         "/bioinfo-js/apps/apps.inc.js",
	         "/bioinfo-js/genome-maps/genome-maps.inc.js"
	         ],function(fn){
		console.log(fn);
	});
	// 	Ext.application({
	// 	    launch: run
	// 	});
	
	
	Ext.Loader.setConfig({enabled: true});
	Ext.Loader.setPath('Ext.ux', 'http://jsapi.bioinfo.cipf.es/ext-libs/sencha/extjs-4.1.1/examples/ux');
	Ext.QuickTips.init();
	Ext.require([
	    'Ext.ux.grid.FiltersFeature',
	    'Ext.grid.PagingScroller'
	]);
	
	var counter = 1000000;
	function test(ms,positions){
		if (ms==null){ms = 50;}
		if (positions==null){positions = 250000;}
// 		genomeMaps.genomeViewer.setLocation("1", counter);
		genomeMaps.genomeViewer.genomeWidget.trackCanvas.moveX(1)
		setTimeout("test()", ms);
		counter = counter + positions;
	}
	
	
	Ext.onReady(run);
	var genomeMaps;
	function run(){
		
// 		var pathname = window.location.href;
// 		console.log(pathname);
		genomeMaps = new GenomeMaps("mydiv"); //the div must exist
		
// 		genomeMaps.addPlugin();
// 		console.log(Ext.ComponentManager.getCount());
		genomeMaps.draw();
	// 	console.log(Ext.ComponentManager.getCount());
		
// 		gv = new GenomeViewer("mydiv");
// 		gv.draw();
	
	
	// gv1.setSpecies("Mus musculus");
	// var gv2 = new GenomeViewer("gv_div1");
	// // vamos par alla!!!
// 	gv2.draw();
	
	
	
	
	
	//GenomeViewer v2
// 	gv1 = new GenomeViewer("mydiv",AVAILABLE_SPECIES[0],{
// 		//toolbar: Ext.create('Ext.toolbar.Toolbar', {height:27}),
// 		availableSpecies: AVAILABLE_SPECIES
// 	});
// 	gv1.draw();
	
	
	
		//RUN TEST
		if($.url().param('test') == "true") {
			setTimeout("test()", 2000);
		}
	
	}
	
	
	
	</script>
	
<!-- 	<STYLE type="text/css"> -->
<!-- 		body{background:gray} -->
<!-- 		.wrap{padding:100px} -->
<!--  		.container {border: 1px solid #bbb; width:802px;}  -->
<!--  	</STYLE> -->
</head>
<body style="overflow: hidden">
	<div id="mydiv"></div>
	<div id="gv_div1"></div>
	<div id="gv_div2"></div>
</body>
</html>